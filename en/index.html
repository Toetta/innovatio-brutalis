<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LGJK9XKDZB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LGJK9XKDZB');
</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Innovatio Brutalis — Industrial design & product development</title>
  <meta name="description" content="Innovatio Brutalis works early in the development chain — from needs analysis and problem framing to concept development, CAD design, prototyping and low-volume manufacturing.">

  <link rel="canonical" href="https://www.innovatio-brutalis.se/en/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Innovatio Brutalis">
  <meta property="og:locale" content="en_US">
  <meta property="og:title" content="Innovatio Brutalis — Industrial design & product development">
  <meta property="og:description" content="Industrial design and product development in Malmö. Projects, prototypes and tools — including FU-Bookkeeping.">
  <meta property="og:url" content="https://www.innovatio-brutalis.se/en/">
  <meta property="og:image" content="https://www.innovatio-brutalis.se/assets/og-image.jpg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Innovatio Brutalis — preview image">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Innovatio Brutalis — Industrial design & product development">
  <meta name="twitter:description" content="Projects, prototypes and tools — including FU-Bookkeeping.">
  <meta name="twitter:image" content="https://www.innovatio-brutalis.se/assets/og-image.jpg">
  <meta name="twitter:image:alt" content="Innovatio Brutalis — preview image">
  <meta name="ib-topbar-cta-label" content="Contact">
  <meta name="ib-topbar-cta-href" content="#contact">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/logo-square-48x48.png" sizes="48x48">
  <link rel="apple-touch-icon" href="/logo-square-180x180.png" sizes="180x180">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#262425">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="container">

    <!-- GLOBAL NAVIGATION (injectas av site.js) -->
    <div id="site-topbar"></div>
    <script defer src="/assets/site.js"></script>
    <script defer src="/assets/site-deeplinks.js"></script>

    <section class="hero">
      <div class="brand-hero"><picture>
          <source srcset="../assets/logo.webp" type="image/webp">
          <img src="../assets/logo.png" alt="Innovatio Brutalis logo">
        </picture></div>
      <h1>Industrial design & product development</h1>
      <p class="tagline">Innovatio Brutalis works early in the development chain — from needs analysis and problem framing to concept development, CAD design, prototyping and low-volume manufacturing.</p>

      <div class="spotify-hero" aria-label="Spotify">
        <button id="spotifyPlayBtn" class="btn small" type="button">▶ Play a random track</button>
        <div id="spotifyStatus" class="spotify-status" style="margin-top:8px;opacity:.8"></div>
      </div>
    </section>

    
<section class="grid">
  <article class="card" data-card-id="home-overview">
    <h2>Development pipeline</h2>
    <p>Innovatio Brutalis works early in the development chain — from needs analysis and problem framing to concept development, CAD design, prototyping and low-volume manufacturing.</p>
    <ul>
      <li>Needs analysis, requirements, and risks</li>
      <li>Problem definition & functional breakdown</li>
      <li>Concept development, evaluation, and decisions</li>
      <li>CAD design with DFM in mind</li>
      <li>Prototyping & verification</li>
      <li>One-offs & small series (metal and engineering polymers)</li>
    </ul>
    <hr class="sep">
    <h2>Quick links</h2>
    <ul>
      <li><a href="cnc/">CNC & laser engraving</a></li>
      <li><a href="print/">3D printing (engineering polymers + PVC/Vinyl 303)</a></li>
      <li><a href="scan/">3D scanning & reverse engineering</a></li>
      <li><a href="engineering/">Engineering & Analysis</a></li>
      <li><a href="automotive/">Automotive & Special Vehicles</a></li>

      
    </ul>
  </article>
  <aside class="card" data-card-id="home-side">
    <h2>Press</h2>
    <a class="press-thumb"
      href="https://www.sydsvenskan.se/malmo/han-gor-okrossbara-glasogonbagar-till-sonen-i-en-3d-skrivare/"
      target="_blank" rel="noopener">
      <img src="/assets/press-sydsvenskan.jpg" alt="Sydsvenskan: impact-resistant 3D-printed eyeglass frames">
      <div class="press-copy">
        <div class="press-title">Read the article</div>
        <div class="press-desc">Innovatio Brutalis was featured in Sydsvenskan for developing impact-resistant 3D-printed eyeglass frames.</div>
      </div>
    </a>

    <a class="press-thumb"
      href="/assets/haparanda-small.pdf" target="_blank" rel="noopener">
      <img src="/assets/haparanda-thumbnail.jpg" alt="Lambretta Cometa 75 — Haparanda - Malmö">
      <div class="press-copy">
        <div class="press-title">Haparanda adventure</div>
        <div class="press-desc">Lambretta Cometa 75 — Haparanda - Malmö</div>
      </div>
    </a>
    <hr class="sep">
    <h2>Quality & ways of working</h2>
    <ul>
      <li>Traceable project structure and CAD versioning</li>
      <li>Measurement verification & documentation when needed</li>
      <li>Fast iteration with clear decision points</li>
    </ul>
  </aside>
</section>


    <section class="card" id="contact" data-card-id="contact" style="margin-top:28px;">
      <h2>Contact</h2>
      <p>Inquiries, collaborations, or RFQs:</p>
      <div class="kv" role="list">
        <div role="listitem">Email</div><div><a href="mailto:m.arlemark@innovatio-brutalis.se">m.arlemark@innovatio-brutalis.se</a></div>
        <div role="listitem">Location</div><div>Malmö, Sweden</div>
        <div role="listitem">Company</div><div>Innovatio Brutalis</div>
        <div role="listitem">Org. no.</div><div>770314-3516</div>
      </div>
    </section>

    <footer>
      <div>Innovatio Brutalis™ — Trademark pending registration with PRV (Sweden).</div>
      <div style="margin-top:6px">© <span id="y"></span> Innovatio Brutalis</div>
    </footer>

    <script src="/spotify-player.js"></script>
    <script>
      // Playlist used as a “pool” if no weekly track is set:
      const PLAYLIST_ID = "7h1c4DGKumkFVXH2N8eMFu";

      // (Optional) Weekly track — set to a track URL or spotify:track:... otherwise null
      const WEEKLY_TRACK = null;

      // Your Spotify Client ID from the dashboard
      // Tip: you can also store it in the browser (clientId is not secret):
      // localStorage.setItem("spotify_client_id", "YOUR_CLIENT_ID");
      let SPOTIFY_CLIENT_ID = "c8efeac0956c4a9f831bb9238e23f5c3";
      try {
        const savedClientId = localStorage.getItem("spotify_client_id");
        if (savedClientId) {
          const candidate = String(savedClientId).trim();
          if (candidate && candidate !== "FYLL_I_DIN_CLIENT_ID") {
            SPOTIFY_CLIENT_ID = candidate;
          }
        }
      } catch (_) {}

      // Must match exactly a Redirect URI you have added in the Spotify dashboard
      const isLocal =
        location.hostname === "127.0.0.1" ||
        location.hostname === "localhost" ||   // ok att det finns här som detection
        location.hostname === "::1";

      const REDIRECT_URI = isLocal
        ? "http://127.0.0.1:8000/callback.html"
        : "https://www.innovatio-brutalis.se/callback.html";

      const statusEl = document.getElementById("spotifyStatus");
      const playBtn  = document.getElementById("spotifyPlayBtn");

      function setStatus(t){ if (statusEl) statusEl.textContent = t || ""; }

      function hasClientId(){
        return Boolean(SPOTIFY_CLIENT_ID) && SPOTIFY_CLIENT_ID !== "FYLL_I_DIN_CLIENT_ID";
      }

      function hasValidToken(){
        try {
          const t = localStorage.getItem("spotify_access_token");
          const exp = Number(localStorage.getItem("spotify_token_expires_at") || 0);
          if (!t || !exp) return false;
          return Date.now() <= exp;
        } catch (_) {
          return false;
        }
      }

      function getSpotifySite(){
        return window.SpotifySite;
      }

      let PUBLIC_TRACK_URLS = [];

      function pickRandom(arr){
        if (!Array.isArray(arr) || arr.length === 0) return null;
        return arr[Math.floor(Math.random() * arr.length)];
      }

      function normalizeTrackUrlOrUri(v){
        if (!v) return null;
        const s = String(v).trim();
        if (!s) return null;
        if (s.startsWith("spotify:track:")) {
          const id = s.split(":")[2];
          return id ? `https://open.spotify.com/track/${id}` : null;
        }
        const m = s.match(/open\.spotify\.com\/track\/([A-Za-z0-9]+)/);
        if (m?.[1]) return `https://open.spotify.com/track/${m[1]}`;
        return null;
      }

      function openUrlInSpotify(url){
        try {
          if (!url) return false;
          window.open(url, "_blank", "noopener,noreferrer");
          return true;
        } catch (_) {
          return false;
        }
      }

      function openPlaylistInSpotify(){
        return openUrlInSpotify(`https://open.spotify.com/playlist/${PLAYLIST_ID}`);
      }

      function openRandomPublicTrackInSpotify(){
        // If you set WEEKLY_TRACK to a track URL/URI, it overrides randomness.
        const weekly = normalizeTrackUrlOrUri(WEEKLY_TRACK);
        if (weekly) return openUrlInSpotify(weekly);

        const pick = normalizeTrackUrlOrUri(pickRandom(PUBLIC_TRACK_URLS));
        if (pick) return openUrlInSpotify(pick);

        return openPlaylistInSpotify();
      }

      async function loadPublicTracks(){
        try {
          const r = await fetch(`/assets/spotify-tracks.json?ts=${Date.now()}`, { cache: "no-store" });
          if (!r.ok) return;
          const j = await r.json();
          const tracks = Array.isArray(j) ? j : j?.tracks;
          if (!Array.isArray(tracks)) return;
          PUBLIC_TRACK_URLS = tracks.map(normalizeTrackUrlOrUri).filter(Boolean);
        } catch (_) {
          // ignore
        }
      }

      (async () => {
        try {
          await loadPublicTracks();
          // For public visitors: no login required; Play will open Spotify.
          // If the user already has a token, we can attempt in-browser playback.
          if (!hasValidToken()) {
            setStatus("Spotify: press Play (opens a random track in Spotify)." );
            return;
          }

          const s = getSpotifySite();
          if (!s || !hasClientId()) {
            setStatus("Spotify: token present but web playback not configured.");
            return;
          }

          const ok = await s.init({ clientId: SPOTIFY_CLIENT_ID, redirectUri: REDIRECT_URI });
          setStatus(ok ? "Spotify: logged in." : "Spotify: press Play.");
        } catch (e) {
          console.error(e);
          setStatus("Spotify: init error (see console).");
        }
      })();

      if (playBtn) {
        playBtn.addEventListener("click", async () => {
          setStatus("Spotify: click…");
          const s = getSpotifySite();
          // Public mode: no token needed; just open a random track in Spotify.
          if (!hasValidToken() || !s || !hasClientId()) {
            setStatus("Spotify: opening a random track in Spotify…");
            openRandomPublicTrackInSpotify();
            return;
          }

          // If not logged in: trigger login right away (sync navigation)
          if (!hasValidToken()) {
            setStatus("Spotify: logging in…");
            try {
              s.login({
                clientId: SPOTIFY_CLIENT_ID,
                redirectUri: REDIRECT_URI,
              });
            } catch (e) {
              console.error(e);
              setStatus("Spotify: login error (see console).");
            }
            return;
          }

          // Ensure config is set (token already present)
          try {
            await s.init({
              clientId: SPOTIFY_CLIENT_ID,
              redirectUri: REDIRECT_URI,
            });
          } catch (e) {
            console.error(e);
            setStatus("Spotify: init error — opening in Spotify.");
            openRandomPublicTrackInSpotify();
            return;
          }

          setStatus("Starting… (Premium required for in-browser playback)");

          try {
            const track = await s.chooseOneTrack({
              weeklyTrack: WEEKLY_TRACK,
              playlistId: PLAYLIST_ID,
            });

            const playedInWeb = await s.playInBrowser(track.uri);

            if (playedInWeb) {
              setStatus(`Playing in browser: ${track.name || "track"}`);
            } else {
              s.openInSpotify(track);
              setStatus("Opened in Spotify (fallback)." );
            }
          } catch (e) {
            console.error(e);
            const msg = String(e?.message || e || "");
            if (msg.includes("Spotify API 403")) {
              const now = Date.now();
              let last = 0;
              try { last = Number(sessionStorage.getItem("spotify_403_relogin_at") || 0); } catch (_) {}

              // Avoid endless consent loops if 403 is persistent (playlist truly inaccessible)
              if (last && (now - last) < 60_000) {
                setStatus("Spotify: 403 Forbidden. This looks persistent. Check PLAYLIST_ID access (public/owned/collab) and that your Spotify app allows this account in the dashboard (Users & Access). ");
                return;
              }

              try { sessionStorage.setItem("spotify_403_relogin_at", String(now)); } catch (_) {}

              setStatus("Spotify: 403 Forbidden — opening in Spotify.");
              openRandomPublicTrackInSpotify();
            } else {
              setStatus(msg ? ("Error: " + msg) : "Could not play right now.");
            }
          }
        });
      }
    </script>
  </div>
</body>
</html>
